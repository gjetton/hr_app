<!-- hr_app/templates/hr/home.html -->{% extends 'base.html' %}{% block title %}Home{% endblock %}{% block content %}<h2>Welcome, {{ user.username }}</h2><p>Clock Status: <span style="color: {% if is_clocked_in %}green{% else %}gray{% endif %};">{{ is_clocked_in|yesno:"Clocked In,Clocked Out" }}</span></p>{% if staff_message %}    <div class="alert alert-info text-center mb-3">        <strong>Staff Message:</strong> {{ staff_message.message }}<br>        <small>Posted by {{ staff_message.posted_by.username }} on {{ staff_message.posted_at }}</small>    </div>{% endif %}{% if profile and profile.picture %}    <div class="text-center mb-3">        <img src="{{ profile.picture.url }}" alt="Profile Picture" style="max-width: 200px;">    </div>{% endif %}{% if app %}    <div class="text-center mb-3">        <p>Application Submitted: {{ app.submitted_at }}</p>        <a href="{% url 'update_application' %}" class="btn btn-primary">Update Application</a>    </div>{% else %}    <div class="text-center mb-3">        <p>No application submitted yet.</p>        <a href="{% url 'apply' %}" class="btn btn-primary">Apply Now</a>    </div>{% endif %}<div class="text-center mb-3">    <form method="post" id="clockForm">        {% csrf_token %}        {{ form.latitude }}        {{ form.longitude }}        <button type="submit" class="btn btn-primary" id="clockButton">{{ is_clocked_in|yesno:"Clock Out,Clock In" }}</button>    </form>    {% if map_link %}        <p><a href="{{ map_link }}" target="_blank" class="btn btn-info mt-2">View Location on Map</a></p>    {% endif %}</div><div class="d-flex justify-content-center gap-2 mb-3">    {% if profile and not profile.picture %}        <a href="{% url 'upload_picture' %}" class="btn btn-secondary">Upload Picture</a>    {% endif %}    <a href="{% url 'suggest' %}" class="btn btn-success">Suggestions</a>    <a href="{% url 'report_hazard' %}" class="btn btn-warning">Report Hazard</a>    <a href="{% url 'timeclock' %}" class="btn btn-info">Timeclock</a></div><div class="text-center mb-3">    <form method="post" action="{% url 'logout' %}" style="display: inline;">        {% csrf_token %}        <button type="submit" class="btn btn-danger">Logout</button>    </form></div><script>document.getElementById('clockButton').addEventListener('click', function(e) {    e.preventDefault();    if (navigator.geolocation) {        navigator.geolocation.getCurrentPosition(            function(position) {                document.getElementById('id_latitude').value = position.coords.latitude;                document.getElementById('id_longitude').value = position.coords.longitude;                document.getElementById('clockForm').submit();            },            function(error) {                alert('Could not get location: ' + error.message + '. Clocking in/out without GPS.');                document.getElementById('clockForm').submit();  // Proceed without GPS            },            { timeout: 10000, enableHighAccuracy: true }        );    } else {        alert('Geolocation is not supported by your browser. Clocking in/out without GPS.');        document.getElementById('clockForm').submit();    }});</script>{% endblock %}